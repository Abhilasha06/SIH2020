{% load static %}


<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>NGOProfile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/style1.css' %}">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css" rel="stylesheet">
    <script type="text/javascript">
        window.onload = function () {
          var chart = new CanvasJS.Chart("chartContainer",
          {
      
            title:{
            text: "NGO's Previous Ratings Chart"
            },
            axisX: {
              valueFormatString: "MMM",
              interval:1,
              intervalType: "month"
            },
            axisY:{
              includeZero: false
      
            },
            data: [
            {
              type: "line",
      
              dataPoints: [
              { x: new Date(2012, 00, 1), y: 3.5 },
              { x: new Date(2012, 01, 1), y: 3.8},
                { x: new Date(2012, 02, 1), y: 4.5, indexLabel: "highest",markerColor: "red", markerType: "triangle"},
              { x: new Date(2012, 03, 1), y: 4.2 },
              { x: new Date(2012, 04, 1), y: 4.0 },
              { x: new Date(2012, 05, 1), y: 3.9 },
              { x: new Date(2012, 06, 1), y: 4.1 },
              { x: new Date(2012, 07, 1), y: 3.5 },
              { x: new Date(2012, 08, 1), y: 3.1 , indexLabel: "lowest",markerColor: "DarkSlateGrey", markerType: "cross"},
              { x: new Date(2012, 09, 1), y: 4.3 },
              { x: new Date(2012, 10, 1), y: 4.4 },
              { x: new Date(2012, 11, 1), y: 3.8 }
              ]
            }
            ]
          });
      
          chart.render();
        }
        </script>
       <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>  
  </head>
  <body>
   <div class="c">
   
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
     
       
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/">Home<span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/home/">Our Project<span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a href="/gov-ngoreviewed/" class="nav-link">
               NGOs List</a>
          </li>
          <li class="nav-item">
            <a href="#t1" class="nav-link">
            Work Undertaken</a>
          </li>
           <li class="nav-item">
            <a href="#t2" class="nav-link">
             Work completed</a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
           
          <li class="nav-item">
            <a href="/logout/" class="nav-link">
              <!-- logout -->
              <i class="fas fa-sign-out-alt"></i> Logout</a>
          </li>
        </ul>
      </div>
    </nav>
 




        <header class="header" style="background-color: transparent">
            <div class="header__text-box" style="background-color: transparent">
                <h1 class="heading-primary" style="background-color: transparent">
                    <span class="heading-primary--main" style="text-transform: none; font-size: 12rem;">{{list.name}}</span>
                    <span class="heading-primary--sub" style="text-transform: none; font-size: 4rem;">{{list.address}}</span>
                    <span class="heading-primary--sub" style="text-transform: none; font-size: 4rem;">{{list.mob}}</span>
                    <span class="heading-primary--sub" style="text-transform: none; font-size: 4rem;">{{list.email}}</span>
                </h1>
            </div>
        </header>
        <div id="chartContainer" style="height: 80vh; width: 100%;">
        </div>

    </div>
  <div class="container-fluid">

      <div class="row"> 
        <div class="col-8">
            <h2 style="width: 100vh!important; font-size: 4rem;"  class="text-white p-2 "> Update Rating</h2>
            <div class="container" style="margin-left:0px !important">
            <!-- display NGOlist from db-->
            <table class="table mt-3" id="t1">
              <thead class="table-dark">
                <tr>
                  <th style="font-size: 2rem;">Name</th>
                  <th style="font-size: 2rem;">Address</th>
                  <th style="font-size: 2rem;">Rating</th>
                  <th></th>
                  <th></th>
                  <th></th>
    
                </tr>
              </thead>
              <tbody class="tbdy">
                <tr>
                  <td style="font-size: 2rem;">{{list.name}}</td>
                  <td style="font-size: 2rem;">{{list.adddress}}</td>
                  <td style="font-size: 2rem;">{{list.rating}}</td>
                  <!-- <td> <input type="button"  value="Delete" class="two" style="background-color:rgba(85, 119, 88, 0.9)" />
                   </td> -->
                  <td style="font-size: 2rem;"> <input type="button" onclick="addTextBox()" class="two" value="Update Rating" style="background-color:rgba(85, 119, 88, 0.9)"/>
                  </td>
                  <td>
                <form method="post" action="">
                    {% csrf_token %}
                    <input type="hidden" value={{list.name}} name="name"  style="display:none "/>
                   <input type="text" value="" name="Rating" class="box4" id="box4" style="display:none "/>
                  <input style="font-size: 2rem;" type="submit" value="Submit" id="two" class="two"disabled="disabled" style="background-color:rgba(85, 119, 88, 0.9)"/>
                </form>
                   </td>
                   <td>
                   
                   </td>
    
                 
                   
                  
                  
                 
                </tr>
                
              </tbody>
            </table>
                
    
          </div>
      <div class="col-8">
        <h2 style="width: 100vh!important; font-size: 4rem;"  class="text-white p-2 "  id="t2"> Work UnderTaken</h2>
        <div class="container"  style="margin-left:0px!important">
        <!-- display location of uncleaned areas-->
        <table class="table mt-3">
          <thead class="table-dark">
            <tr>
              <th style="font-size: 2rem;">SNo.</th>
              <th style="font-size: 2rem;">Location</th>
              <th style="font-size: 2rem;">Time</th>
              <th style="font-size: 2rem;">Images</th>

            </tr>
          </thead>
          <tbody class="tbdy">
            {% for x in list.imagesActive %}
            <tr>


              <td style="font-size: 2rem;">{{forloop.counter}}</td>
              <td style="font-size: 2rem;">{{x.lat}},{{x.lon}}</td>
              <td style="font-size: 2rem;">{{x.timestamp}}</td>
              <td style="font-size: 2rem;">
                <form action="" method="get">
                  <input type="hidden" name="id" value="{{x.id}}">
                  <input type="submit" class="btn" value="View Image" name="mybtn2">
                </form>
              </td>

              

            
              <!-- <td></td>            -->
            </tr>
            {% endfor %}
            
          </tbody>
        </table>
            

      </div>
    </div>
     
  
  </div>
  <div class="container-fluid">

    <div class="row"> 
    <div class="col-8">
      <h2 style="width: 100vh!important; font-size: 4rem;"  class="text-white p-2 " id="t3"> Work Completed</h2>
      <div class="container"  style="margin-left:0px!important">
      <!-- display location of uncleaned areas-->
      <table class="table mt-3" >
        <thead class="table-dark">
          <tr>
            <th style="font-size: 2rem;">SNo.</th>
            <th style="font-size: 2rem;">Location</th>
            <th style="font-size: 2rem;">Completion Time</th>
            <th style="font-size: 2rem;">Images</th>

          </tr>
        </thead>
        <tbody class="tbdy">
          {% for x in list.imagesCompleted %}
          <tr>


            <td style="font-size: 2rem;">{{forloop.counter}}</td>
            <td style="font-size: 2rem;">{{x.lat}},{{x.lon}}</td>
            <td style="font-size: 2rem;">{{x.timestamp}}</td>
            <td style="font-size: 2rem;">
              <form action="" method="get">
                <input type="hidden" name="id" value="{{x.id}}">
                <input type="submit" class="btn" value="View Image" name="mybtn2">
              </form>
            </td>
   
          </tr>
          {% endfor %}
          
        </tbody>
      </table>
          

    </div>
  </div>
   

</div>
  <div>
  </div>
  <script>
    function addTextBox() {
 
     var box4 = document.getElementById("box4");
     box4.style.display = "inline";
     document.getElementById('two').removeAttribute('disabled');
 
     
 }
 $(document).on("submit","#rating_form",function(e){
        // alert("AJAX Working");
        e.preventDefault();
        $.ajax({
            type:"POST",
            url:"",
            data:{
                name:$('#name').val(),
                email:$('#email').val(),
                message:$('#message').val()
    
            },
            success:function(res){
                console.log(res);
                if(res==200)
                {
                    alert("We Will contact you soon");
                }
                else
                {
                    alert("Invalid Form");
                }
            }
        })
    })
 
 </script>
</body>
  

  
</html>
